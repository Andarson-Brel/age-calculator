<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- displays site properly based on user's device -->

    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="./assets/images/favicon-32x32.png"
    />

    <title>Frontend Mentor | Age calculator app</title>

    <!-- Feel free to remove these styles or customise in your own stylesheet ðŸ‘ -->

    <link rel="stylesheet" href="styles.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,400;0,500;0,600;0,700;0,800;0,900;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <main class="main">
      <div class="primary-container">
        <form action="" class="general-form">
          <div class="day-container">
            <label for="day">DAY</label>
            <br />
            <input type="number" id="day" placeholder="DD" />
            <p class="error-message-day error-message">error day</p>
          </div>

          <div class="month-container">
            <label for="month">MONTH</label>
            <br />
            <input type="number" id="month" placeholder="MM" />
            <p class="error-message error-message-month">error month</p>
          </div>

          <div class="year-container">
            <label for="Year">YEAR</label>
            <br />
            <input type="number" id="year" placeholder="YYYY" />
            <p class="error-message error-message-year">error year</p>
          </div>
        </form>
        <div class="butn-container">
          <div class="btn-line"></div>

          <div class="submit-btn">
            <img src="./assets/images/icon-arrow.svg" alt="" class="btn" />
          </div>
        </div>
        <div class="display-section">
          <h1 class="result">
            <span class="computed-year results">--</span>Years
          </h1>

          <h1 class="result">
            <span class="computed-month results">--</span>Months
          </h1>

          <h1 class="result">
            <span class="computed-day results">--</span>Days
          </h1>
        </div>
      </div>
    </main>
    <!-- <h1>Age Calculator</h1>
    <label for="dob">Enter your date of birth:</label>
    <input type="date" id="dob" />
    <button onclick="calculateAge()">Calculate Age</button>
    <p id="result"></p> -->

    <script>
      // let year = document.getElementById("year");
      // let month = document.getElementById("month");
      // let day = document.getElementById("day");
      // const errorMessageDay = document.querySelector(".error-message-day ");
      // const erroMessageMonth = document.querySelector(".error-message-month");
      // const errorMessageYear = document.querySelector(".error-message-year");
      // const btn = document.querySelector(".submit-btn");
      // const errorMessage = document.querySelectorAll(".error-message");
      // const yearDisplay = document.querySelector(".computed-year");
      // const monthDisplay = document.querySelector(".computed-month");
      // const dayDisplay = document.querySelector(".computed-day");
      // const errorM = "--";
      // const inputs = document.querySelectorAll("input");
      // const resuts = document.querySelectorAll(".results");
      // const labels = document.querySelectorAll("label");

      // function getMaxDays(month) {
      //   switch (month) {
      //     case "2":
      //       return 28;
      //     case "4":
      //     case "6":
      //     case "9":
      //     case "11":
      //       return 30;
      //     default:
      //       return 31;
      //   }
      // }

      // function validation() {
      //   for (
      //     let i = 0;
      //     i < inputs.length &&
      //     i < resuts.length &&
      //     i < labels.length &&
      //     i < errorMessage.length;
      //     i++
      //   ) {
      //     function error() {
      //       inputs[i].style.borderColor = "red";
      //       labels[i].style.color = "red";
      //       resuts[i].style.color = "red";
      //       resuts[i].textContent = errorM;
      //     }
      //     if (inputs[i].value === "") {
      //       error();
      //       inputs[i].style.color = "red";
      //       errorMessage[i].style.display = "block";
      //       errorMessage[i].textContent = "This field is required";
      //     } else if (month.value > 12) {
      //       error();
      //       erroMessageMonth.style.color = "red";
      //       erroMessageMonth.textContent = "Must be a Valid Month";
      //       erroMessageMonth.style.display = "block";
      //     } else if (year.value > new Date().getFullYear()) {
      //       error();
      //       errorMessageYear.textContent = "Year must be in the past";
      //       errorMessageYear.style.display = "block";
      //     } else if (day.value > getMaxDays(month.value)) {
      //       error();
      //       errorMessageDay.style.display = "block";
      //       errorMessageDay.textContent = "must be a valid date";
      //     }
      //   }
      // }

      // btn.addEventListener("click", function () {
      //   validation();
      //   const combined = `${year.value}-${month.value}-${day.value}`;

      //   const dob = new Date(combined);

      //   const today = new Date();
      //   const yearsDiff = today.getFullYear() - dob.getFullYear();
      //   const monthsDiff = today.getMonth() - dob.getMonth();
      //   const daysDiff = today.getDate() - dob.getDate();
      //   let ageInYears = yearsDiff;
      //   let ageInMonths = monthsDiff;
      //   let ageInDays = daysDiff;

      //   if (monthsDiff < 0 || (monthsDiff === 0 && daysDiff < 0)) {
      //     ageInYears--;
      //     ageInMonths = 12 + monthsDiff;
      //     if (daysDiff < 0) {
      //       ageInMonths--;
      //       ageInDays =
      //         new Date(today.getFullYear(), today.getMonth(), 0).getDate() +
      //         daysDiff;
      //     }
      //   } else if (monthsDiff > 0 && daysDiff < 0) {
      //     ageInMonths--;
      //     ageInDays =
      //       new Date(today.getFullYear(), today.getMonth(), 0).getDate() +
      //       daysDiff;
      //   } else {
      //     dayDisplay.textContent = ageInDays;
      //     monthDisplay.textContent = ageInMonths;
      //     yearDisplay.textContent = ageInYears;
      //   }
      // });

      let year = document.getElementById("year");
      let month = document.getElementById("month");
      let day = document.getElementById("day");
      const errorMessageDay = document.querySelector(".error-message-day ");
      const errorMessageMonth = document.querySelector(".error-message-month");
      const errorMessageYear = document.querySelector(".error-message-year");
      const btn = document.querySelector(".submit-btn");
      const errorMessage = document.querySelectorAll(".error-message");
      const yearDisplay = document.querySelector(".computed-year");
      const monthDisplay = document.querySelector(".computed-month");
      const dayDisplay = document.querySelector(".computed-day");
      const errorM = "--";
      const inputs = document.querySelectorAll("input");
      const results = document.querySelectorAll(".results");
      const labels = document.querySelectorAll("label");

      function getMaxDays(month) {
        switch (month) {
          case "2":
            return 29;
          case "4":
          case "6":
          case "9":
          case "11":
            return 30;
          default:
            return 31;
        }
      }

      function validation() {
        let validator = true;
        for (let i = 0; i < inputs.length; i++) {
          function error() {
            inputs[i].style.borderColor = "red";
            labels[i].style.color = "red";
            results[i].style.color = "red";
            results[i].textContent = errorM;
            validator = false;
          }
          if (inputs[i].value === "") {
            error();
            inputs[i].style.color = "red";
            errorMessage[i].style.display = "block";
            errorMessage[i].textContent = "This field is required";
            validator = false;
          } else if (month.value > 12 || month.value < 1) {
            error();
            errorMessageMonth.style.color = "red";
            errorMessageMonth.textContent = "Must be a Valid Month";
            errorMessageMonth.style.display = "block";
            validator = false;
          } else if (year.value > new Date().getFullYear()) {
            error();
            errorMessageYear.textContent = "Year must be in the past";
            errorMessageYear.style.display = "block";
            validator = false;
          } else if (day.value > getMaxDays(month.value) || day.value < 1) {
            error();
            errorMessageDay.style.display = "block";
            errorMessageDay.textContent = "must be a valid date";
            validator = false;
          } else {
            inputs[i].style.borderColor = "black";
            labels[i].style.color = "black";
            results[i].style.color = "hsl(259, 100%, 65%)";
            inputs[i].style.color = "black";

            errorMessage[i].style.display = "none";

            validator = true;
          }
        }
        return validator;
      }

      btn.addEventListener("click", function (e) {
        e.preventDefault;
        if (validation()) {
          const combined = `${year.value}-${month.value}-${day.value}`;

          const dob = new Date(combined);

          const today = new Date();
          const yearsDiff = today.getFullYear() - dob.getFullYear();
          const monthsDiff = today.getMonth() - dob.getMonth();
          const daysDiff = today.getDate() - dob.getDate();
          let ageInYears = yearsDiff;
          let ageInMonths = monthsDiff;
          let ageInDays = daysDiff;

          if (monthsDiff < 0 || (monthsDiff === 0 && daysDiff < 0)) {
            ageInYears--;
            ageInMonths = 12 + monthsDiff;
            if (daysDiff < 0) {
              ageInMonths--;
              ageInDays =
                new Date(today.getFullYear(), today.getMonth(), 0).getDate() +
                daysDiff;
            }
          } else if (monthsDiff > 0 && daysDiff < 0) {
            ageInMonths--;
            ageInDays =
              new Date(today.getFullYear(), today.getMonth(), 0).getDate() +
              daysDiff;
          }

          dayDisplay.textContent = ageInDays;
          monthDisplay.textContent = ageInMonths;
          yearDisplay.textContent = ageInYears;
        }
      });
    </script>
  </body>
</html>
